<template name="home">
    <h1>Games</h1>

    {{#if currentUser}}
    <h2>Welcome {{currentUser.username}} (Role: {{currentUserRole}})</h2>
    <button id="auth-button" class="btn btn-danger">Log Out</button>
    {{else}}
    <button id="auth-button" class="btn btn-primary">Login/Register</button>
    {{/if}}

    {{#if loading}}
    <div class="container" style="display: flex; justify-content: center;">
        <div class="loader"></div> <!-- Yüklenme mesajı -->
    </div>
    {{else}}
    {{#if noResults}}
    <p>Oyun bulunamadı.</p>
    {{else}}
    <div class="search-container">
        <input type="text" id="search-input" placeholder="Search games..." />
        <button id="search-button" class="btn btn-primary">Search</button>
    </div>

    <p>Total games: {{gamesCount}}</p>

    <!-- Oyunları listelemek için bir tablo oluşturun -->
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Genres</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody>
            {{#each games}}
            <tr>
                <td>{{name}}</td>
                <td>{{description}}</td>
                <td>{{formattedGenres}}</td>
                <td>{{formattedCreatedAt}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
    {{/if}}
    {{/if}}

    <!-- Login/Register panel -->
    {{#if showAuthPanel}}
    <div id="auth-panel" class="auth-panel">
        <!-- Kapatma butonu -->
        <div class="close-panel-container">
            <button id="close-auth-panel" class="btn btn-danger close-panel-button">&times;</button>
        </div>

        {{#if showLogin}}
        {{> login}}
        {{else}}
        {{> register}}
        {{/if}}
    </div>
    {{/if}}
</template>
